(this.$WP=this.$WP||[]).push(["fsml46",(e,t)=>{"use strict";var r,n,a,o,s,i,l,u,c,d,g,h,m,f={__key:42494985829808,id:"26a62288fdb0cdf246619afe73f66e1f",loc:{},definitions:[]},v=e=>({request:{clientRequestTimestampMs:Date.now(),request:e}}),p=(e,t,r,n)=>{var a={pageUid:t,eventTimestampMs:Date.now(),...e},o=[];return r&&o.push({key:"user_id",value:r}),n&&o.push({key:"session_id",value:n}),0!==o.length&&(a={opaqueIds:o,...a}),a},I=()=>{var e=i(f),[,{uid:t}]=r.useContext(n),{userId:o,sessionId:s}=r.useContext(a);return r.useCallback((r=>{g.installLogger((t=>e(v(t)))),g.attemptToLog(p(r,t,o,s))}),[e,s,t,o])},b=()=>{var e=i(f),[,{uid:t}]=r.useContext(n),{userId:o,sessionId:s}=r.useContext(a);return r.useCallback((r=>{var n=p(r,t,o,s);return e(v([n])).then((e=>{var t,r,n;if(e.error||null==(t=e.data)||null==(r=t.Impressions_postInteractionsV2)||null==(n=r.response)||!n[0])throw new Error("Unable to log Interaction")}))}),[e,s,t,o])},k=()=>{var e=i(f);r.useEffect((()=>{g.installLogger((t=>e(v(t))));var t=requestIdleCallback((()=>{g.performLoggingAttempt()}));return()=>{cancelIdleCallback(t)}}),[e])},L={__key:0x8e10e4f5dd38,id:"8e10e4f5dd38396976e925ce8018cc76",loc:{},definitions:[]},w=e=>({request:{clientRequestTimestampMs:Date.now(),request:e}}),y=()=>{var[,e]=l(L),[,{uid:t}]=r.useContext(n),{userId:s,sessionId:i}=r.useContext(a),{userAgentCategory:u}=r.useContext(o);return r.useCallback((r=>{var n={pageUid:t,userId:s,sessionId:i,userAgent:u,eventTimestampMs:Date.now(),team:"Other",...r};h.installLogger((t=>e({request:{clientRequestTimestampMs:Date.now(),request:t}}))),h.attemptToLog(n)}),[e,t,s,i,u])},C=()=>{var[,e]=l(L),[,{uid:t}]=r.useContext(n),{userId:s,sessionId:i}=r.useContext(a),{userAgentCategory:u}=r.useContext(o);return r.useCallback((r=>{var n={pageUid:t,userId:s,sessionId:i,userAgent:u,eventTimestampMs:Date.now(),team:"Other",...r};return e(w([n])).then((e=>{var t,r,n;if(e.error||null==(t=e.data)||null==(r=t.Impressions_postInteractionsV3)||null==(n=r.response)||!n[0])throw new Error("Interaction failed to be recorded")}))}),[e,i,t,u,s])},A=()=>{var[,e]=l(L);r.useEffect((()=>{h.installLogger((t=>e(w(t))));var t=requestIdleCallback((()=>{h.performLoggingAttempt()}));return()=>{cancelIdleCallback(t)}}),[e])},q={__key:0xc67bdfe93f94,id:"c67bdfe93f947eb34f514c045ea0eb9a",loc:{},definitions:[]},x=e=>{if(0===e.length)return Promise.resolve();var t=new URLSearchParams("?batched=true");return e.forEach(((e,r)=>{(e=>{var t=new URLSearchParams;return Object.entries(e).forEach((([e,r])=>{"eventId"!==e&&t.append(e,r)})),t})(e).forEach(((e,n)=>{void 0!==e&&t.append(`data[${r}][${n}]`,e)}))})),fetch("/GARecord",{method:"POST",body:t.toString(),credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"}}).catch((e=>{console.error(e)}))},S=()=>{m.installLogger((()=>Promise.resolve()))},_=()=>{m.installLogger(x)},T=e=>{var t={eventId:Math.random().toString()};e.forEach(((e,r)=>{t[r]=e})),m.attemptToLog(t)},R=e=>{try{var t;return(null==(t=e.match(/^\/([a-zA-Z0-9_]+)/))?void 0:t[1])||"Home"}catch(e){return"Unknown"}},E=()=>{var[{page:e,params:t},{uid:o}]=r.useContext(n),{userId:s}=r.useContext(a),i=(null==t?void 0:t.detailId)||void 0,l=(null==t?void 0:t.geoId)||void 0;return r.useCallback((t=>{var r,n="Unknown"===e?(e=>{try{var t,r;return(null==(t=e.match(/-d([0-9]+)/))?void 0:t[1])||(null==(r=e.match(/-g([0-9]+)/))?void 0:r[1])||void 0}catch(e){return}})(window.location.pathname):i||l||void 0;m.attemptToLog({gac:t.module,gaa:t.action,gal:t.context,gav:t.value,gani:t.nonInteraction,gasl:null!=(r=t.location)?r:n,gass:"Unknown"===e?R(window.location.pathname):e,gapu:o,gams:null!==s,eventId:Math.random().toString()})}),[e,i,l,o,s])},M=e=>{var t=E(),{module:n,action:a,context:o,value:s,location:i,nonInteraction:l}=e||{};return r.useCallback((()=>{n&&a&&t({module:n,action:a,context:o,value:s,location:i,nonInteraction:l})}),[t,n,a,o,s,i,l])};return[()=>{u=class{constructor(){this.backing=void 0,this.backing=[]}add(e){this.backing.push(e)}remove(e){this.backing=this.backing.filter((t=>e.every((e=>!s(t,e)))))}readAll(){return this.backing}},c=class{constructor(e){this.keyName=void 0,this.backup=void 0,this.keyName=e,this.backup=new u}add(e){try{var t=JSON.parse(localStorage.getItem(this.keyName)||"[]");t.push(e),localStorage.setItem(this.keyName,JSON.stringify(t))}catch(t){this.backup.add(e)}}remove(e){try{var t=this.readAll();localStorage.setItem(this.keyName,JSON.stringify(t.filter((t=>e.every((e=>!s(t,e)))))))}catch(t){this.backup.remove(e)}}readAll(){try{return JSON.parse(localStorage.getItem(this.keyName)||"[]")}catch(e){return this.backup.readAll()}}},g=new(d=class{constructor(e,t=1e3){this.locked=void 0,this.buffer=void 0,this.timeout=void 0,this.logger=void 0,this.cbId=void 0,this.performLoggingAttempt=()=>{if(null!==this.logger)if(this.locked)this.enqueueLoggingAttempt();else{var e=this.buffer.readAll();if(e.length>0){this.locked=!0;try{this.logger(e).then((()=>{this.buffer.remove(e)})).finally((()=>{this.locked=!1}))}catch(e){console.error(e),this.locked=!1}}}},this.buffer=e,this.logger=null,this.locked=!1,this.timeout=t,this.cbId=null}installLogger(e){this.logger=e}attemptToLog(e){this.buffer.add(e),this.enqueueLoggingAttempt()}enqueueLoggingAttempt(){null!==this.cbId&&(clearTimeout(this.cbId),this.cbId=null),this.cbId=setTimeout((()=>{this.performLoggingAttempt(),this.cbId=null}),this.timeout)}})(new c("interaction_mutation_buffer"),3e3),h=new d(new c("interactionV3_mutation_buffer"),3e3),(m=new d(new c("interaction_buffer"),1e3)).installLogger(x),"undefined"!=typeof requestIdleCallback&&"undefined"!=typeof navigator&&"node.js"!==navigator.userAgent&&requestIdleCallback((()=>{m.performLoggingAttempt()})),e({LogInteractionV4:q,enqueue:T,mockLogger:S,unmockLogger:_,useBlockingInteractionLogger:b,useBlockingInteractionV3Logger:C,useGARecordCallback:M,useGARecorder:E,useInteractionLogger:I,useInteractionV3Logger:y,useSubmitInteractionBufferEffect:k,useSubmitInteractionV3BufferEffect:A})},[e=>r=e,e=>(n=e.Route,a=e.Visitor,o=e.Device),e=>s=e.default,e=>i=e.useStatelessMutation,e=>l=e.useMutation]]},["cDcdfi","2R4xv2","YwNsO_","OnmvvE","5X2em-"]]);
