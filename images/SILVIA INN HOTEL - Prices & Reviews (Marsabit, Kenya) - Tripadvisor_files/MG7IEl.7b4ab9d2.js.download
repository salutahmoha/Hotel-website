(this.$WP=this.$WP||[]).push(["MG7IEl",(e,t)=>{"use strict";var r,a,n,i,o,s,l,d,u,c,g,v,h,m,p,f,y,w,I,P,C,A,b,E,R,D,T,_,S,k,M,N,O,$,x,W,U,B,L,H,j,z,F,V,q,G,X,K,Q,J,Y,Z,ee,te,re,ae,ne,ie,oe,se,le,de,ue,ce,ge,ve,he,me,pe,fe,ye,we,Ie,Pe,Ce,Ae,be,Ee,Re,De,Te,_e,Se,ke,Me,Ne,Oe,$e,xe,We,Ue,Be,Le,He,je,ze,Fe,Ve,qe,Ge,Xe,Ke,Qe,Je,Ye,Ze=({children:e})=>e,et=({children:e})=>{var{browser:t,userAgentCategory:r}=n(F),{domainName:a}=n(V),[s,l]=i(null),[d,u]=i(!1),c=Se();return o((()=>{if(ke)l(ke);else{var e="MOBILE"===r?window.innerHeight:window.innerHeight/2,n=.01*window.innerHeight,i={userAgentCategory:r,fetchMargin:`${e}px`,renderMargin:`${n}px`,browserFamily:t.family,domainName:a,recordScriptLoadFailure:c};if(Ie.get(Pe))ke=new Ce(i),u(!0);else if(y("rubicon_header_bidding")||y("amazon_header_bidding")){var o=[];y("amazon_header_bidding")&&o.push(new Ae(i)),y("rubicon_header_bidding")&&o.push(new be(i)),ke=new Ee(i,o)}else ke=new Re(i);l(ke)}}),[t,r,a,c]),te(De.Provider,{value:s,children:re(Te,{children:[d&&te(_e,{onDisableTestMode:()=>{Ie.remove(Pe),window.location.reload()}}),te(Me,{children:e})]})})},tt=(e,t)=>fetch(`/UpdateSessionDatesAjax?${e}=${t}`,{credentials:"same-origin"}),rt=({stayDates:e,guests:t,defaultDates:r})=>{var a=ue(e),n=ce(t);return a&&n&&a.checkInDate&&a.checkOutDate?{checkInDate:a.checkInDate,checkOutDate:a.checkOutDate,defaultDates:r,rooms:n.rooms,adults:n.adults,children:n.children,childAgesPerRoom:n.childAgesPerRoom}:null},at=({preferences:e,hotels:t,restaurants:r,attractions:a,flights:n})=>({preferences:e,attractions:{singleDate:de(a.singleDate,"-"),fromDate:de(a.fromDate,"-"),toDate:de(a.toDate,"-"),adults:a.attractionPaxAdults,children:a.attractionPaxChildren},restaurants:{date:de(r.date,"-")},hotels:t?rt(t):null,flights:{oneWayDate:de(n.oneWayDate,"-"),departureDate:de(n.departureDate,"-"),returnDate:de(n.returnDate,"-"),originAirportCode:n.originAirportCode,destinationAirportCode:n.destinationAirportCode,adults:1,seniors:0,childAges:[],classOfService:null}}),nt=({preferencesTravelInfo:e,attractionsTravelInfo:t,hotelsTravelInfo:a,restaurantsDate:n,flightsTravelInfo:i,setRestaurantsDate:o,setHotelsTravelInfo:s,setAttractionsTravelInfo:l,setFlightsTravelInfo:d,children:u})=>{var c=r.useMemo((()=>e&&"string"==typeof e.currency?e:{currency:"USD"}),[e]),g=r.useMemo((()=>((e,t,r,a,n)=>({preferences:{setCurrency:t=>{globalThis.require(["trjs!ta/util/Currency"],(r=>r.setCurrencyAndReload(t,e)))}},attractions:{setSingleDate:e=>{t(le(e,"-")),tt("attrdate",null===e?"_":le(e))},setDates:(e,r)=>{t(void 0,le(e,"-"),le(r,"-")),tt("attrrange",`${le(e)}_${le(r)}`)},setPassengers:(e,r)=>{t(void 0,void 0,void 0,e,r),tt("zuf",`${e}_${r}`)}},restaurants:{setDate:e=>{e&&(r(e,C.formatDate("week_date_short",e)),tt("eaterydate",le(e)))},setTime:()=>{},setGuests:()=>{},clearAll:()=>{}},hotels:{setStayDates:(e,t)=>{var r=`${le(e)}_${le(t)}`;a(r),tt("staydates",r)},setGuestInfo:(e,t,r)=>{var n=`${t}_${e}${r.length>0?`_${r.map((e=>e.join(","))).join(":")}`:""}`;a(void 0,n),tt("uguests",n)},setTravelInfo:()=>{}},flights:{setOneWayDate:e=>{n(le(e)),tt("oneway",le(e))},setRoundTripDates:(e,t)=>{n(void 0,le(e),le(t)),tt("rtdates",`${le(e)}_${le(t)}`)},setOriginAirportCode:e=>{n(void 0,void 0,void 0,e),tt("flightorig",e)},setDestinationAirportCode:e=>{n(void 0,void 0,void 0,void 0,e),tt("flightdest",e)},setTravelerInfo:()=>{throw new Error("Not implemented: flights.setTravelerInfo is only supported in lithium")}}}))(c.currency,l,o,s,d)),[c.currency,l,o,s,d]),v=r.useMemo((()=>({...at({preferences:c,attractions:t||{},hotels:a,restaurants:{date:n},flights:i||{}}),update:g})),[c,t,a,n,i,g]);return te(q.Provider,{value:v,children:u})},it=()=>{var{userId:e}=r.useContext(G),[t]=r.useContext(X),a=r.useContext(K),n=t.params.geoId||-1;return r.useCallback((r=>e&&!r.forceLogin?Promise.resolve({userId:e,hasCreatedMember:null}):new Promise((e=>{if(ve()&&"undefined"!=typeof window&&(window.location=`/RegistrationController?flow=${encodeURIComponent(r.flow||"CORE_COMBINED")}&pid=${encodeURIComponent(String(r.pid||-1))}&returnTo=${encodeURIComponent(t.path)}&fullscreen=true`),ge.isNativeWebview())ge.showRegistration(!1);else{var i={flow:r.flow||"CORE_COMBINED",pid:r.pid||-1,userRequestedForce:!0,extraQueryParams:{flowOrigin:r.flowOrigin||"join",...r.extraQueryParams},displayOnShowOverlay:r.deferShowOverlay||!1,locationId:n,requireSecure:r.requireSecure||!1,onSuccess:t=>{var n={userId:null!=t&&t.user_id?`${t.user_id}`:null,hasCreatedMember:!(null==t||!t.hasCreatedMember),loginProvider:null==t?void 0:t.loginProvider};r.onSuccess&&r.onSuccess(n),a({userId:n.userId}),e(n)},onClose:r.onClose,closeX:!1!==r.closeX,closeOnDocClick:!1!==r.closeOnDocClick,windowShadeOption:r.windowShadeOption||"light"};globalThis.require(["trjs!ta/registration/RegOverlay"],(e=>{r.onLogin&&r.onLogin(),e.showRegOverlayByPageModel(null,null,window.require("page-model"),i)}))}}))),[e,n,a,t.path])},ot=e=>{var t=$e(),{login:r}=he(),a=y("apr_lithium_control")?r:t;return te(me.Provider,{value:a,children:e.children})},st=()=>{var[e,{navigate:t}]=n(X);o((()=>{var r=r=>{var a=r.state;null!=a&&a.params&&(e.path!==a.path||e.page!==a.page||!pe(e.params,a.params)||e.fragment!==a.fragment)&&t(a,"POP")};return window.addEventListener("popstate",r,!1),()=>{window.removeEventListener("popstate",r,!1)}}),[e,t])},lt=(e,t)=>e.page===(null==t?void 0:t.page)&&pe(e.params,null==t?void 0:t.params),dt=(e,t)=>{try{switch(t){case"FRAGMENT_PUSH":case"PARAM_UPDATE":history.pushState(e,"",e.path);break;case"PAGE_VIEW":history.pushState(e,"",e.path),window.scroll(0,0);break;case"IN_PLACE":history.replaceState(e,"",e.path);break;case"INITIAL":case"POP":break;default:return}}catch(e){console.error("Caught exception while accessing History API:",e)}},ut=(e,t)=>`${-1===e.indexOf("#")?e:e.split("#")[0]}${""!==(t||"")?`#${t||""}`:""}`,ct=({children:e})=>(We(),e),gt=({children:e,lithiumRouteContext:t,legacyRoute:r,lithiumNavigateAction:a,legacyNavigateAction:n})=>{var[s,u]=t,[c]=i(s),g=fe();o((()=>{var e,{path:t}=c;window.location.pathname+window.location.search===t&&void 0===(null==(e=history.state)?void 0:e.params)&&history.replaceState(c,"",c.path)}),[g,c]);var v=l(((e,t="FRAGMENT_PUSH")=>{var r=e||"";if(r!==s.fragment){var n={...s,path:ut(s.path,r),fragment:r};a(n),dt(n,t)}}),[a,s]),h=l(((e,t="PAGE_VIEW")=>{if(!lt(i=s,o=e)||i.fragment!==o.fragment||i.path!==o.path){var i,o,l,d,u,{page:c,params:v,fragment:h}=e,m=t,p=lt(s,e),f=s.fragment!==h,y=D(s.page,e.page);!p||"PAGE_VIEW"!==t&&"PARAM_UPDATE"!==t||(m=f?"FRAGMENT_PUSH":"IN_PLACE"),(!y||"PAGE_VIEW"!==m&&"PARAM_UPDATE"!==m?"POP"!==m?Promise.resolve((d=h,u=ut((l=e).path,d),{...l,path:u})):Promise.resolve(e):ye(g,e,"PARAM_UPDATE"===m)).then((e=>{var t=lt(s,e)?r:{...v,page:c};T(r,t)?(dt(e,m),n(t,e.path),a(e)):window.location=e.path}))}}),[g,n,a,r,s]),m=d((()=>[{...we(s)},{...u,navigate:h,navigateToFragment:v}]),[s,h,v,u]);return te(X.Provider,{value:m,children:te(ct,{children:e})})},vt=({children:e,deviceId:t,isWebview:a,viewportCategory:n,userAgentCategory:i,os:o,browser:s,securityToken:l,userId:d,initialAbsoluteUrl:u,locale:c,isRtl:g,language:v,cdnPrefix:h,drsInfo:m,version:p,domainName:f,servlet:y,sessionId:w})=>{var I=r.useMemo((()=>({locale:{code:c,isRtl:g,language:v},cdnPrefix:h,domainName:f,version:p})),[c,g,h,v,f,p]),[P,C]=r.useState({userId:d,sessionId:w});r.useEffect((()=>{C({userId:d,sessionId:w})}),[d,w]);var b=r.useMemo((()=>({id:t,isWebview:a,viewportCategory:n,userAgentCategory:i,jsEngine:{family:"UNKNOWN",majorVersion:-1},renderEngine:{family:"UNKNOWN",majorVersion:-1},os:o,browser:s,securityToken:l})),[n,t,i,o,s,a,l]),E=r.useMemo((()=>({drsInfo:m,ssrLogs:[],renderError:null,stagingError:null,debugTool:!1,serviceCalls:[],serviceWorker:!1})),[m]),R=r.useMemo((()=>({servlet:y,fullPageUrl:u})),[y,u]),D={getMessage:A,loadMessages:()=>{throw new Error("loadMessages is not supported in LithiumBridge")}};return te(V.Provider,{value:I,children:te(Q.Provider,{value:E,children:te(G.Provider,{value:P,children:te(K.Provider,{value:C,children:te(F.Provider,{value:b,children:te(Oe,{children:te(Ue,{children:te(oe.Provider,{value:D,children:te(ne,{children:te(ae,{children:te(xe,{children:te(se,{children:te(ie,{config:R,suppressConfigWarnings:!0,children:te(Ne,{children:e})})})})})})})})})})})})})})},ht=({store:e,urqlClient:t,children:r})=>te(h,{store:e,children:te(I,{client:t,children:te(Be,{children:te(Y,{children:te(_,{children:te(ae,{children:r})})})})})}),mt=(e,t,r,a)=>!y("sentryio_js")||He?Promise.resolve():B(e,t,r,a).then((e=>{He=e,define("@ta/sentryBridge",[],(()=>e))})),pt={},ft={},yt={},wt=async e=>(b(e.messages),w(e.features),await Promise.all([...e.css.map((e=>(e in yt||(yt[e]=W(je.redux.meta.imageCdnUrl+e)),yt[e]))),...e.js.map((e=>(e in yt||(yt[e]=U(je.redux.meta.imageCdnUrl+e)),yt[e])))]),$WP.getChunkPromise(e.chunkId)),It={},Pt=e=>(e in pt||(pt[e]=fetch(`/data/1.0/bundle/dependencies/bundle?name=${encodeURIComponent(e)}`,{credentials:"same-origin",headers:{"x-ta-version":Xe}}).then((e=>e.json())).then((t=>(It[e]=t.chunkId,t))).then(wt)),pt[e]),Ct=e=>(e in ft||(ft[e]=fetch(`/data/1.0/bundle/dependencies/chunk?id=${encodeURIComponent(e)}`,{credentials:"same-origin",headers:{"x-ta-version":Xe}}).then((e=>e.json())).then(wt)),ft[e]),At=(e,t)=>te(f,{store:ze,children:te(Le,{store:ze,urqlClient:Ke,children:e})}),bt=()=>{var[e,{uid:t}]=a.useContext(X);return J(e,t),j(),z(),null},Et="data-component-init",Rt=(e,t,r={})=>{var n=document.getElementById(e);if(null!==n){if(!n.getAttribute(Et)){n.setAttribute(Et,Et);var i=e=>{new m(ze,e,r).reload(),u(At(a.createElement(e,r)),n)};if("string"==typeof t){var o=It[t];$WP.getChunkPromise(o).then((e=>i(e.default)))}else i(t)}}else console.error(`Unable to find DOM element with id = ${e}`)},Dt=e=>{var t=document.getElementById(e);null!==t&&(g(t),t.removeAttribute(Et))},Tt=(e,t,r={})=>{var n=document.getElementById(e);if(null!==n){if(!n.getAttribute(Et)){n.setAttribute(Et,Et);var i=e=>{new m(ze,e,r).stage(r),c(At(a.createElement(e,r)),n)};if("string"==typeof t){var o=It[t];$WP.getChunkPromise(o).then((e=>i(e.default)))}else i(t)}}else console.error(`Unable to find DOM element with id = ${e}`)},_t=(e,t)=>{var r=te(Le,{store:ze,urqlClient:Ke,children:e});return t&&(r=te(f,{store:ze,children:r})),r};return[()=>{Me=s(Ze),Ne=et,Oe=v((e=>({preferencesTravelInfo:e.travelerInfo.preferences,attractionsTravelInfo:e.travelerInfo.attractions,restaurantsDate:e.travelerInfo.restaurants&&e.travelerInfo.restaurants.date,hotelsTravelInfo:e.travelerInfo.hotels,flightsTravelInfo:e.travelerInfo.flights})),(e=>({setCurrency:t=>e(k.travelerInfo.setCurrency(t)),setRestaurantsDate:(t,r)=>e(k.travelerInfo.setEatTravelerDate(t,r)),setHotelsTravelInfo:(t,r)=>e(k.travelerInfo.setHotelsTravelerInfo(t,r,!1)),setAttractionsTravelInfo:(t,r,a,n,i)=>e({type:"SET_ATTRACTIONS_TRAVELER_INFO",travelerInfo:{singleDate:t,fromDate:r,toDate:a,attractionPaxAdults:n,attractionPaxChildren:i}}),setFlightsTravelInfo:(t,r,a,n,i)=>e(k.travelerInfo.setFlightsTravelerInfo(t,r,a,n,i))})))(nt),$e=it,xe=ot,We=st,Ue=v(((e,t)=>({...t,lithiumRouteContext:e.lithiumRoute,legacyRoute:e.route})),{lithiumNavigateAction:k.lithiumRoute.navigate,legacyNavigateAction:k.route.navigate})(gt),Be=v(((e,t)=>({...t,deviceId:e.tracking.uniqueId,isWebview:e.meta.isNativeWebview,viewportCategory:e.meta.device.viewportCategory,userAgentCategory:e.meta.device.userAgentCategory,os:e.meta.device.os,browser:e.meta.device.browser,securityToken:e.meta.device.securityToken,userId:e.auth.loggedInUserId,initialAbsoluteUrl:e.meta.initialAbsoluteUrl,locale:e.i18n.ietfLocale,isRtl:e.i18n.isRtl,language:e.i18n.language,cdnPrefix:e.meta.imageCdnUrl,drsInfo:e.tracking.drsInfo,version:e.webVersion||`${e.tracking.vcsBranch}|${e.tracking.vcsRevision}`,domainName:e.meta.baseUrl.split("://")[1],servlet:e.meta.initialServletName,sessionId:e.tracking.sessionId})))(vt),Le=ht,({pageManifest:je}=__WEB_CONTEXT__),E("Components Initialization"),E("Components Bundle Load"),je.bundles.forEach((e=>{ft[e]=$WP.getChunkPromise(e)})),Promise.all(Object.values(ft)).then((()=>{R("Components Bundle Load")})),je.assets.forEach((e=>{yt[e]=Promise.resolve(!0)})),b(je.messages),w(je.features),ze=M(je.redux),({csrfToken:Fe}=ze.getState().auth),({vcsRevision:Ve,vcsBranch:qe,uid:Ge}=ze.getState().tracking),Xe=ze.getState().webVersion||`${qe||""}|${Ve||""}`,Ke=P({securityToken:Fe,ssrData:je.urqlCache,initialPvid:Ge}),$WP.installResolver(Ct),Qe=te(f,{store:ze,children:te(h,{store:ze,children:re(_,{children:[te(Z,{}),te(S,{}),te(bt,{}),te(H,{}),te(L,{installer:mt,fallbackPageName:je.redux.route.page,project:"tripadvisor-web-app"}),te(p,{}),te(ee,{isRubiconEnabled:y("rubicon_header_bidding")})]})})}),E("Loadables"),Je=Promise.all(je.lazyLoadedModules.filter((e=>!!e)).map((e=>$WP.getChunkEmptyPromise(e)))).finally((()=>{R("Loadables");var{body:e}=document,t=document.createElement("div");t.id="singletonRoot",e&&(e.appendChild(t),u(At(Qe),t)),E("Hydration"),ze.dispatch(N());var r=[];return je.hydrations.forEach((e=>{var t=document.getElementById(e.id);null===t||t.getAttribute(Et)||(t.setAttribute(Et,Et),r.push((()=>new Promise((r=>{$WP.getChunkPromise(e.package).then((n=>{e.package,e.id,new m(ze,n.default,e.props).stage(e.props),c(At(a.createElement(n.default,e.props)),t,(()=>{r()}))}))})))))})),Promise.all(r.map((e=>{var t=e();return t?t.then(null,(()=>null)):t})))})).finally((()=>{R("Hydration"),ze.dispatch(O()),$(),E("Render");var e=[];je.renders.forEach((t=>{var r=document.getElementById(t.id);null===r||r.getAttribute(Et)||(r.setAttribute(Et,Et),e.push(new Promise((e=>{$WP.getChunkPromise(t.package).then((n=>{new m(ze,n.default,t.props).reload(),t.package,t.id,u(At(a.createElement(n.default,t.props)),r,(()=>{e()}))}))}))))})),Promise.all(e).finally((()=>{if(R("Render"),R("Components Initialization"),y("prod_runtime_tracking")&&"undefined"!=typeof window&&window.performance&&window.performance.getEntriesByName){var e=window.performance.getEntriesByName("components-Components Initialization-end","mark");if(e&&e.length>0){var t=e[0].startTime;null!==t&&x({module:"runtime",action:"initialization_complete",context:Number(t).toString()})}}}))})),Ye=je.hydrations.concat(je.renders).reduce(((e,t)=>(e[t.id]=t.props,e)),{}),define("@ta/platform.runtime",[],(()=>({pageManifestComponents:Ye,wrapSubrootElement:_t,hydrateRoot:Tt,destroyRoot:Dt,createRoot:Rt,default:Je,importBundle:Pt}))),e({createRoot:Rt,default:Je,destroyRoot:Dt,hydrateRoot:Tt,importBundle:Pt,pageManifestComponents:Ye,wrapSubrootElement:_t})},[e=>(r=e,a=e.default,n=e.useContext,i=e.useState,o=e.useEffect,s=e.memo,l=e.useCallback,d=e.useMemo),e=>(u=e.render,c=e.hydrate,g=e.unmountComponentAtNode),e=>(v=e.connect,h=e.Provider),e=>m=e.ApiMonitor,e=>p=e.ConsentProvider,e=>f=e.ErrorBoundary,e=>(y=e.featureIsEnabled,w=e.loadFeatures),e=>(I=e.default,P=e.buildUrqlClient),e=>(C=e.globalize,A=e.getMessage,b=e.loadMessages),e=>(E=e.start,R=e.end),e=>(D=e.canNavigateBetweenPages,T=e.canNavigate,_=e.Router,S=e.History),e=>(k=e.actions,M=e.initializeStore,N=e.pauseRequestAction,O=e.resumeRequestAction,$=e.storeResizeHandler),e=>x=e.default,e=>(W=e.importCss,U=e.importScript),e=>(B=e.installSentry,L=e.Sentry),e=>H=e.WebMonitoring,e=>(j=e.useSubmitInteractionBufferEffect,z=e.useSubmitInteractionV3BufferEffect),e=>(F=e.Device,V=e.Environment,q=e.TravelInfo,G=e.Visitor,X=e.Route,K=e.Authenticate,Q=e.Debug),e=>J=e.usePageViewLogging,e=>(Y=e.PopupHierarchyProvider,Z=e.PopupHierarchyRootRenderer),e=>ee=e.default,e=>(te=e.jsx,re=e.jsxs),e=>ae=e.VirtualDOMPortalProvider,e=>{},e=>ne=e.KeyboardNavigationModeProvider,e=>ie=e.MonikerConfiguration,e=>oe=e.Messages,e=>se=e.ToastProvider,e=>(le=e.serializeDate,de=e.parseDate,ue=e.parseStayDates,ce=e.parseGuestInfo),e=>ge=e.NativeBridge,e=>ve=e.default,e=>he=e.default,e=>me=e.Login,e=>pe=e.default,e=>fe=e.useClient,e=>(ye=e.tryToCanonicalizeRoute,we=e.getBackwardsCompatRoute),e=>Ie=e.default,e=>(Pe=e.AD_TEST_MODE_STORAGE_KEY,Ce=e.TestAdServer,Ae=e.AmazonAdServer,be=e.RubiconAdServer,Ee=e.PreBiddingGptAdServer,Re=e.GptAdServer,De=e.AdServer,Te=e.PageTargetingProvider,_e=e.TestModeIndicator),e=>Se=e.useLogAdScriptLoadFailure]]},["cDcdfi","faye7n","h74DsO","RiHMo-","lMO0v3","nIW_Rw","-i3PJS","OnmvvE","535agn","B7vHz6","N4pTU2","aunxON","Jk5sjx","pLbCP4","UhC_bI","2kkWwV","fsml46","2R4xv2","xZoNdB","FAXpyL","yP3WOz","F5FCuN","vq6MSq","RH7wJe","W3_c4H","jb_4W2","0DsHEV","Q7TAd7","oo669z","Ov85iR","SfdMbo","VANuRt","mv7yXI","YwNsO_","5X2em-","F8raOV","jaCyxS","nCvudh","wzAQTx"]]);
