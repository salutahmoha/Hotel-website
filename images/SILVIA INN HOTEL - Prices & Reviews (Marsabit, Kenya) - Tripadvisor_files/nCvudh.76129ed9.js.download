(this.$WP=this.$WP||[]).push(["nCvudh",(e,t)=>{"use strict";var r,s,i,a,o,n,d,l,g,c,h,u,p,v,m,S,f,b,I,y,w,E,T,A,M,B,C,O,P,L,_,D,F,x,R,k,j,N,z,H,W,$,U,G,q,K="ads.testMode";function V(e){var t=window.performance;t&&t.mark&&t.mark(e)}var Q=["3x1","1x1"],X=[],Z=(e,t)=>{V("ias_v_end");var r=function(e,t,r){var s=window.performance;if(s&&s.measure){s.measure(e,"ias_v_start","ias_v_end");var i=s.getEntriesByName(e)[0];if(i)return i.duration}return null}("ias_latency");if(r){var s={gac:"ias_verify",gaa:"ias_latency",gal:e.toString(),gav:parseInt(r,10).toString(),gass:t},i=new URLSearchParams(s);T(i)}},Y=55978451,J=["2mdn.net","amazon-adsystem.com","ampproject.org","celtra.com","doubleclick.net","google.com","googletagservices.com","googlesyndication.com","adsafeprotected.com"],ee=[{width:300,height:250},{width:300,height:600},{width:160,height:600},{width:728,height:90},{width:970,height:250},{width:550,height:1},{width:550,height:310}],te=[{width:320,height:50},{width:300,height:250}];function re(e,t){globalThis.apstag._Q.push([e,t])}var se=[{width:300,height:250},{width:300,height:600},{width:160,height:600},{width:728,height:90},{width:970,height:250}],ie=[{width:320,height:50},{width:300,height:250}];function ae(e,t){globalThis.apstag._Q.push([e,t])}var oe=[{width:550,height:310}],ne=[],de=({onDisableTestMode:e})=>A("div",{className:"ckQWX D S4 q R2",children:["Ad test mode enabled",M("button",{onClick:e,className:"dxcyR _S Wb B- Q",children:"[Disable]"})]}),le=({children:e})=>{var[t,r]=s({}),i=n((()=>({targeting:t,setTargeting:r})),[t]);return M(W.Provider,{value:i,children:e})},ge=({children:e})=>e,ce=({children:e})=>{var{browser:t,userAgentCategory:r}=d(g),{debugTool:o}=d(c),{domainName:n}=d(h),[l,u]=s(null),[p,v]=(()=>{var[e,t]=s(!1),r=i((e=>{t(e),I.set(K,e)}),[]);return a((()=>{var e=!0===I.get(K);t(e);var r=I.addListener(K,t);return()=>r()}),[]),[e,r]})(),m=f();return a((()=>{var e="MOBILE"===r?window.innerHeight:window.innerHeight/2,s=.01*window.innerHeight,i={userAgentCategory:r,fetchMargin:`${e}px`,renderMargin:`${s}px`,browserFamily:t.family,domainName:n,recordScriptLoadFailure:m};if(p)u(new R(i));else{var a=[];a.push(new _(i)),a.push(new D(i)),a.push(new L(i)),u(new x(i,a))}}),[t,r,p,n,m]),A(G.Provider,{value:l,children:[M(b,{isRubiconEnabled:!0}),A(le,{children:[o&&M(U,{testMode:p,onTestModeChange:v}),p&&M(H,{onDisableTestMode:()=>v(!1)}),M(q,{children:e})]})]})},he={__key:0xe47b7de10017,id:"e47b7de100177531430992d789c646b6",loc:{},definitions:[]};function ue(){var{id:e}=r.useContext(g);if(!e)return"-1";var t=I.get("adTargetingUserBucketOverride");return null!=t?t:Math.abs(C(e)%100).toString()}var pe=e=>e.toISOString().substring(0,10),ve=()=>{var e,[{page:t,params:r},{uid:i}]=d(u),{browser:o,userAgentCategory:l}=d(g),{sessionId:h}=d(p),{drsInfo:m}=d(c),{hotels:S}=d(v),f=((e,t)=>n((()=>{if(e.includes("Fusion")){var r;switch(e){case"AttractionsFusion":r="Attractions";break;case"AttractionProductsFusion":r="Attraction_Products";break;case"HotelsFusion":r="Hotels";break;case"HotelsListFusion":r="HotelsList";break;default:r=e}return"MOBILE"===t?`Mobile${r}`:r}return e}),[e,t]))(t,l),b=((e,t)=>n((()=>"Attractions"!==e&&"MobileAttractions"!==e||!(e=>{var t;return!(null!=e&&e.pagee||(null==e||null==(t=e.filters)?void 0:t.length)>0)})(t)?null:"attract_cover"),[e,t]))(f,r),{targeting:I}=d($),[y,w]=s(null),E=r.geoId?r.geoId:0,T=r.detailId?r.detailId:0,A=ue(),M={hotelTravelInfo:(null==S?void 0:S.checkInDate)&&S.checkOutDate&&{checkInDate:pe(S.checkInDate),checkOutDate:pe(S.checkOutDate),defaultDates:S.defaultDates}||null,locationId:T||E,pageType:f,browserType:o.family,drs:m?(e=m,e.split("*").map((e=>{var[t,r]=e.split(".");return{space:t,sliceNum:Number.parseInt(r,10)}}))):[],globalContextUrlParameters:Object.entries(r).map((([e,t])=>({key:e,value:String(t)}))),userAgentCategory:l},[{fetching:C,data:O}]=B({query:he,variables:{pageAdsRequestInput:M}});return a((()=>{var e,t=null==O||null==(e=O.gptInfo)?void 0:e[0];if(!C&&t){var{pageLevelTargeting:r,adBase:s,ppid:a}=t;if(r&&s){var o=Object.fromEntries(r.map((e=>{var{key:t,value:r}=e||{};return t&&r?[t,[...r]]:null})).filter(Boolean)),n=Object.fromEntries(Object.entries(I).map((([e,t])=>[e,Array.isArray(t)?t:[t]])));return w({...o,...n,pv_id:[i],sess:[h||null],adBase:s,ppid:a,userBucket:String(A),cover:b}),()=>{w(null)}}}}),[O,C,i,h,I,A,b]),y};return e("useUserBucket",ue),[()=>{k=Object.freeze({GPT:{url:"//securepubads.g.doubleclick.net/tag/js/gpt.js",name:"GPT"},RUBICON_MOBILE:{url:"//ads.rubiconproject.com/prebid/13406_Mweb_Display.js",name:"RUBICON_MOBILE"},RUBICON_DESKTOP:{url:"//ads.rubiconproject.com/prebid/13406_Desktop_Display.js",name:"RUBICON_DESKTOP"},AMAZON_PREBID:{url:"//c.amazon-adsystem.com/aax2/apstag.js",name:"AMAZON_PREBID"}}),j=class{constructor({fetchMargin:e="0px",renderMargin:t="0px",scriptSources:r,recordScriptLoadFailure:s=(()=>{})}){this.loadPromise=null,this.fetchMargin=void 0,this.renderMargin=void 0,this.scriptSources=void 0,this.recordScriptLoadFailure=void 0,this.scriptSources=r,this.fetchMargin=e,this.renderMargin=t,this.recordScriptLoadFailure=s}getScriptSources(){return this.scriptSources}getConsent(){return new Promise(((e,t)=>w(E.TARGETING,(()=>e()),(()=>t(new Error("Advertising consent declined"))))))}observe(e,t="0px"){return new Promise((r=>{var s=new IntersectionObserver((e=>{e.reduce(((e,t)=>e||t.isIntersecting),!1)&&(s.disconnect(),r())}),{rootMargin:t,threshold:0});s.observe(e)}))}loadScripts(){return this.loadPromise||(this.scriptSources,this.loadPromise=this.getConsent().then((()=>{var e=this.scriptSources.map((e=>S(e.url,"WP")));return Promise.all(e)})).then((()=>{})).catch((e=>(this.loadPromise=null,this.scriptSources,this.recordScriptLoadFailure(this.scriptSources.map((e=>e.name))),Promise.reject(e))))),this.loadPromise}load(e,t){return t||"undefined"==typeof IntersectionObserver?this.loadScripts():Promise.all([this.observe(e,this.fetchMargin).then((()=>this.loadScripts())),this.observe(e,this.renderMargin).then((()=>console.debug("ScriptLoader:",e,"is in viewport")))])}},e("GptAdServer",O=class{constructor({fetchMargin:e,renderMargin:t,browserFamily:r,recordScriptLoadFailure:s}){this.slotSubscriptions={},this.subscriptions=[],this.ppid=null,this.scriptLoader=void 0,this.confirmSafeFrame=e=>{try{var t,r=null==e||null==(t=e.slot)?void 0:t.getSlotElementId(),s=document.querySelector(`#${r.split(":").join("\\:")} div[id^="google_ads_iframe"] iframe`);if(!(s&&s instanceof HTMLIFrameElement))return;setTimeout((()=>{var t,r=s.contentDocument;if(r){var i=r.documentElement,a=Array.from(r.getElementsByTagName("iframe")).filter((e=>e.src&&e.src.includes("ad.doubleclick.net/ddm"))).length>0,o=i&&!!i.getAttribute("amp-version"),n=!!r.getElementById("google_image_div"),d=(null==e||null==(t=e.slot)?void 0:t.getResponseInformation().advertiserId)===Y;if(!(o||n||d||a)){var l=Array.from(r.scripts).map((e=>e.src.replace(/.*\/\//,"").split(/[/?#]/)[0].split(".").slice(-2).join("."))).filter((e=>-1===J.indexOf(e))).filter(Boolean);l.length&&console.error("Same-domain ad served with third-party scripts",{slotInfo:e.slot.getResponseInformation(),unapprovedDomains:l})}}}),1500)}catch(e){}},globalThis.googletag=globalThis.googletag||{cmd:[]},this.scriptLoader=new j({fetchMargin:e,renderMargin:t,scriptSources:[k.GPT],recordScriptLoadFailure:s}),googletag.cmd.push((()=>{googletag.pubads().setSafeFrameConfig({allowOverlayExpansion:!0,allowPushExpansion:!0,sandbox:"EDGE"!==r}),googletag.pubads().addEventListener("slotOnload",this.confirmSafeFrame),googletag.pubads().disableInitialLoad(),googletag.enableServices()})),this.createEventProxy("slotRenderEnded",(e=>({isRendered:!0,isLoaded:!1,isEmpty:Y===(null==e?void 0:e.advertiserId)||(null==e?void 0:e.isEmpty)}))),this.createEventProxy("slotOnload",(()=>({isLoaded:!0}))),this.createEventProxy("slotVisibilityChanged",(e=>({isVisible:!(null==e||!e.inViewPercentage)})))}createEventProxy(e,t){googletag.cmd.push((()=>{googletag.pubads().addEventListener(e,(r=>{var s,i=null==r||null==(s=r.slot)?void 0:s.getSlotElementId(),a=t(r);i&&a&&this.slotSubscriptions[i]&&(this.slotSubscriptions[i](a,e),this.subscriptions.forEach((e=>e())))}))}))}getSlots(){return googletag.pubadsReady?(googletag.pubads().getSlots()||[]).map((e=>{var{advertiserId:t,creativeId:r,lineItemId:s,campaignId:i}=e.getResponseInformation()||{};return{id:e.getSlotElementId(),targeting:Object.fromEntries(e.getTargetingKeys().map((t=>[t,e.getTargeting(t)]))),responseInformation:{isCollapser:t&&t===Y,advertiserId:t,creativeId:r,lineItemId:s,campaignId:i}}})):[]}getSlot(e){return googletag.pubads().getSlots().find((t=>t.getSlotElementId()===e))}addEventListener(e){return this.subscriptions.push(e),()=>{var t=this.subscriptions.indexOf(e);t>-1&&this.subscriptions.splice(t,1)}}createSlot({id:e,elem:t,size:r,targeting:s,aboveTheFold:i}){return googletag.cmd.push((()=>{if(!this.getSlot(e)){var{adBase:t,ppid:i,...a}=s;null!==i&&(googletag.pubads().setPublisherProvidedId(i),this.ppid=i);var o=function(e){return[...e.split("|").map((e=>e.split("x").map(Number))),"fluid"]}(r),n=googletag.defineSlot(t,o,e);if(n){var d;if(null==n.updateTargetingFromMap||n.updateTargetingFromMap(a),n.setTargeting("refreshCount","0"),null==n.getTargetingKeys||null==(d=n.getTargetingKeys())||!d.length)return void this.broadcastEmptySlot(e);n.setForceSafeFrame(!1),n.addService(googletag.pubads()),n.setCollapseEmptyDiv(!0),googletag.display(e)}}})),this.scriptLoader.load(t,i).then((()=>{this.refreshSlot(e,i)})).catch((()=>{this.broadcastEmptySlot(e)})),{addEventListener:t=>(this.slotSubscriptions[e],this.slotSubscriptions[e]=t,()=>{delete this.slotSubscriptions[e]})}}refreshSlot(e,t=!1){this.broadcastRefreshStart(e),googletag.cmd.push((()=>{var t=this.getSlot(e);if(t){var r=()=>{googletag.pubads().refresh([t],{changeCorrelator:!1}),t.setTargeting("refreshCount",String(parseInt(t.getTargeting("refreshCount"),10)+1))};!function(e){var t=e.getSlotElementId(),[,r,s]=t.split(":");return!(Q.includes(r)||X.includes(s))}(t)?r():function(e){return new Promise((t=>{V("ias_v_start");var r=e.getSizes().map((e=>e.getWidth&&e.getHeight?`${e.getWidth()}.${e.getHeight()}`:"1.1")),s=`https://pixel.adsafeprotected.com/services/pub?${["anId=930842",`slot={id:${e.getSlotElementId()},ss:[${r.toString()}],p:${e.getAdUnitPath()}}`,`wr=${window.innerWidth}.${window.innerHeight}`,`sr=${window.screen.width}.${window.screen.height}`].join("&")}`,[i]=e.getTargeting("PageType"),a=setTimeout((()=>{Z(!0,i),t()}),2e3);fetch(s,{credentials:"same-origin",headers:{"X-Purpose":"review"}}).then((e=>e.json())).then((r=>{r.code&&r.message&&(console.error(`Error in IAS response. Code: ${r.code}. Message: ${r.message}`),t()),clearTimeout(a),Z(!1,i);var{fr:s,brandSafety:o}=r,{id:n,vw:d}=r.slots.slot;I.get(K)||e.setTargeting("fr",s),e.setTargeting("id",n),e.setTargeting("vw",d),e.updateTargetingFromMap(o),t()})).catch((e=>{console.error(`Error fetching IAS response. ${e}`),t()}))}))}(t).then(r)}}))}destroySlot(e){googletag.cmd.push((()=>{var t=this.getSlot(e);t&&(googletag.destroySlots([t]),this.subscriptions.forEach((e=>e())))}))}broadcastRefreshStart(e){var t,r;null==(t=(r=this.slotSubscriptions)[e])||t.call(r,{},"slotRefreshStart")}broadcastEmptySlot(e){var t,r;null==(t=(r=this.slotSubscriptions)[e])||t.call(r,{isEmpty:!0,isLoaded:!0,isRendered:!0},"forcedEmpty")}}),e("RubiconAdServer",P=class{constructor(e){this.context=void 0,this.config=void 0,this.rubiconSupportedFormats=void 0,globalThis.pbjs=globalThis.pbjs||{que:[]},this.config=e,this.rubiconSupportedFormats="MOBILE"===e.userAgentCategory?te:ee,this.cleanupGDCookies()}cleanupGDCookies(){var e=y.get();null!=e&&e!==[]&&Object.entries(e).forEach((e=>{var[t,r]=e;t.match(/^_gd160/)&&"1"===r&&Number(t.split("_gd")[1])<1609e9&&y.remove(t,{path:"",domain:`.${this.config.domainName}`})}))}setContext(e){this.context=e}getScripts(e=!0){return e?["MOBILE"===this.config.userAgentCategory?k.RUBICON_MOBILE:k.RUBICON_DESKTOP]:[]}preCreateSlot(e){}slotSupportsBidding(e){var t=e.getSizes();return!!Array.isArray(t)&&t.filter((e=>"object"==typeof e&&null!==e&&e.getWidth()&&e.getHeight())).map((e=>({width:e.getWidth(),height:e.getHeight()}))).some((e=>this.rubiconSupportedFormats.some((t=>t.width===e.width&&t.height===e.height))))}refreshSlot(e,t,r,s){googletag.cmd.push((()=>{var t=this.context.getSlot(e);t&&this.slotSupportsBidding(t)?(()=>{var[e=""]=t.getTargeting("loctype"),[r=""]=t.getTargeting("platform");pbjs.que.push((()=>{pbjs.rp.requestBids({callback:()=>{s()},timeout:2e3,gptSlotObjects:[t],data:{inventory:{loctype:e,platform:r}}})}))})():r()}))}}),L=class extends P{constructor(e){super(e),this.rubiconWrapperScriptLoader=void 0,this.wrapperLoaded=void 0,this.pageViewID=void 0,this.pageCount=void 0,this.wrapperLoaded=!1,this.pageCount=0}getScripts(e=!0){var t=super.getScripts(!1);return this.rubiconWrapperScriptLoader=new j({fetchMargin:this.config.fetchMargin,renderMargin:this.config.renderMargin,scriptSources:["MOBILE"===this.config.userAgentCategory?k.RUBICON_MOBILE:k.RUBICON_DESKTOP],recordScriptLoadFailure:this.config.recordScriptLoadFailure}),t}preCreateSlot(e){var t,r;super.preCreateSlot(e);var s=null==e||null==(t=e.targeting)||null==(r=t.pv_id)?void 0:r[0];this.pageViewID!==s&&(this.pageCount+=1,this.pageViewID=s)}refreshSlot(e,t,r,s){t&&!this.wrapperLoaded&&this.pageCount<=1?r():this.rubiconWrapperScriptLoader.loadScripts().then((()=>{this.wrapperLoaded=!0,super.refreshSlot(e,t,r,s)}))}},N={init(){re("i",arguments)},fetchBids(){re("f",arguments)},setDisplayBids(){},targetingKeys:()=>[],_Q:[]},e("AmazonAdServer",_=class{constructor(e){this.context=void 0,this.config=void 0,this.amazonSupportedFormats=void 0,this.getScripts=e=>e?[k.AMAZON_PREBID]:[],this.preCreateSlot=e=>{},this.config=e,globalThis.apstag=globalThis.apstag||N,this.amazonSupportedFormats="MOBILE"===e.userAgentCategory?ie:se,apstag.init({pubID:"3940",adServer:"googletag",useSafeFrames:!0})}setContext(e){this.context=e}slotSupportsBidding(e){var t=e.getSizes();return!!Array.isArray(t)&&t.filter((e=>"object"==typeof e&&null!==e&&e.getWidth()&&e.getHeight())).map((e=>({width:e.getWidth(),height:e.getHeight()}))).some((e=>this.amazonSupportedFormats.some((t=>t.width===e.width&&t.height===e.height))))}refreshSlot(e,t,r,s){googletag.cmd.push((()=>{var t=this.context.getSlot(e);t&&this.slotSupportsBidding(t)?apstag.fetchBids({slots:[{slotID:t.getSlotElementId(),slotName:t.getAdUnitPath(),sizes:t.getSizes().filter((e=>"object"==typeof e&&null!==e&&e.getWidth()&&e.getHeight())).map((e=>[e.getWidth(),e.getHeight()]))}],timeout:2e3},(e=>{apstag.setDisplayBids(),s()})):r()}))}}),z={init(){ae("i",arguments)},fetchBids(){ae("f",arguments)},setDisplayBids(){},targetingKeys:()=>[],_Q:[]},e("AmazonVideoAdServer",D=class extends _{constructor(e){super(e),globalThis.apstag=globalThis.apstag||z,this.amazonSupportedFormats="MOBILE"===e.userAgentCategory?ne:oe,apstag.init({pubID:"3940",adServer:"googletag",videoAdServer:"DFP",useSafeFrames:!0,deals:!0})}refreshSlot(e,t,r,s){googletag.cmd.push((()=>{var t=this.context.getSlot(e);if(t)if(this.slotSupportsBidding(t)){var i;i={slotID:t.getSlotElementId().includes("inline1")?"OutstreamInline1":"OutstreamInline2",sizes:t.getSizes().filter((e=>"object"==typeof e&&null!==e&&e.getWidth()&&e.getHeight())).map((e=>[e.getWidth(),e.getHeight()])),mediaType:"video"},apstag.fetchBids({slots:[i],timeout:2e3},(e=>{apstag.setDisplayBids(),s()}))}else r();else r()}))}}),F=class{constructor(){this.skippedServers=0,this.requestedRefresh=!1,this.bidsFetched=0}},e("PreBiddingGptAdServer",x=class extends O{constructor(e,t){super(e),this.servers=void 0,this.slotStatuses=void 0,this.servers=t,this.slotStatuses=new Map;var r=this.servers.flatMap((e=>(e.setContext(this),e.getScripts(!0))));r.length&&(this.scriptLoader=new j({fetchMargin:e.fetchMargin,renderMargin:e.renderMargin,scriptSources:[k.GPT,...r],recordScriptLoadFailure:e.recordScriptLoadFailure}))}createSlot(e){return this.servers.forEach((t=>{t.preCreateSlot(e)})),super.createSlot(e)}skipServer(e,t=!1){var r=this.slotStatuses.get(e)||new F;r.skippedServers<this.servers.length-1?(r.skippedServers+=1,this.slotStatuses.set(e,r)):(r.requestedRefresh=!0,this.slotStatuses.set(e,r),super.refreshSlot(e,t))}doRefresh(e,t=!1){var r=this.slotStatuses.get(e)||new F;r.requestedRefresh||(r.bidsFetched+=1,r.bidsFetched<this.servers.length-r.skippedServers?this.slotStatuses.set(e,r):this.getSlot(e)&&(r.requestedRefresh=!0,this.slotStatuses.set(e,r),super.refreshSlot(e,t)))}refreshSlot(e,t=!1){this.slotStatuses.set(e,new F),this.servers.forEach((r=>{r.refreshSlot(e,t,(()=>this.skipServer(e,t)),(()=>this.doRefresh(e,t)))}))}}),e("TestAdServer",R=class e extends O{constructor(e){super(e)}static getAdBase(e){return e.replace(/\.s\//,".test.s/")}createSlot({id:t,targeting:r,...s}){return super.createSlot({id:t,targeting:{...r,adBase:e.getAdBase(r.adBase)},...s})}destroySlot(e){super.destroySlot(e)}refreshSlot(e,t=!1){super.refreshSlot(e,t)}}),H=de,$=W=o({targeting:{},setTargeting:()=>{}}),U=m.component.onUsage((()=>t("nCvudh/nY_EFj")),"default"),G=o(null),q=l(ge),e({AD_TEST_MODE_STORAGE_KEY:K,AdServer:G,AdServerProvider:ce,AmazonAdServer:_,AmazonVideoAdServer:D,GptAdServer:O,PageTargeting:$,PageTargetingProvider:le,PreBiddingGptAdServer:x,RubiconAdServer:P,TestAdServer:R,TestModeIndicator:H,usePageTargeting:ve,useUserBucket:ue})},[e=>(r=e.default,s=e.useState,i=e.useCallback,a=e.useEffect,o=e.createContext,n=e.useMemo,d=e.useContext,l=e.memo),e=>(g=e.Device,c=e.Debug,h=e.Environment,u=e.Route,p=e.Visitor,v=e.TravelInfo),e=>(m=e,S=e.importScript),e=>f=e.useLogAdScriptLoadFailure,e=>b=e.default,e=>I=e.default,e=>y=e.default,e=>(w=e.requestConsent,E=e.CategoriesEnum),e=>T=e.enqueue,e=>(A=e.jsxs,M=e.jsx),e=>B=e.useQuery,e=>C=e.stringHash]]},["cDcdfi","2R4xv2","pLbCP4","wzAQTx","yP3WOz","jaCyxS","vmXh3M","lMO0v3","fsml46","F5FCuN","5X2em-","O-HcBE"]]);
