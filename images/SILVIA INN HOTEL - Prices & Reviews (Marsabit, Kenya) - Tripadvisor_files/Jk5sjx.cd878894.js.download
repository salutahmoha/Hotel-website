(this.$WP=this.$WP||[]).push(["Jk5sjx",(e,t)=>{"use strict";var r,n,i,a,o,s,c,l,d,p,u,I,g,m,h,v,T,O,_,C,E,S,A,f,N,k=(e,t,r)=>{var n=new RegExp(`(-${t}([0-9]+))|([?&]${r}=([0-9]+))`).exec(e);if(n){if(void 0!==n[2])return n[2];if(void 0!==n[4])return n[4]}},L=e=>k(e,"d","detail")||k(e,"g","geo"),P=e=>{var t=e;return null==t?"":("string"!=typeof t&&(t=t.toString()),t.replace(/!/g,"!!").replace(/\./g,"!.").replace(/\*/g,"!*"))},w=e=>Object.keys(e).map((t=>{var r=e[t];return`${P(t)}.${P(r)}`})).join("*"),G=e=>{var{value:t}=e;t?"number"!=typeof t&&(t=parseFloat(t),Number.isNaN(t)&&(t=0)):t=0;var{nonInteraction:r}=e;"boolean"!=typeof r&&(r=!0===r);var{srcServlet:n}=e;if(n)0===n.indexOf("/")&&(n=n.substring(1));else if(!n&&window&&window.location&&window.location.pathname){var i=/\/([^-]*)/.exec(window.location.pathname);n=i?i[1]:null}null===n&&(n=void 0);var{location:a}=e;a||(a=document&&document.location?L(document.location.href):null),null==a&&(a="null");var{isMemberSignedIn:o}=e;null==o&&(o=!1);var{context:s}=e;void 0===s&&(s="undefined");var c={gac:e.module,gaa:e.action,gal:s,gav:String(t),gani:String(r),gass:n,gasl:a,gapu:e.parentUid,gams:o?"1":"0",gacl:e.commerceClickLocation,gatt:e.trackingTree,bsid:e.bookingSessionId};return Object.keys(c).filter((e=>void 0===c[e])).forEach((e=>delete c[e])),c},R=e=>{var t=r().getState();return{srcServlet:t.tracking.analytics?t.tracking.analytics.url:void 0,location:t.page.detailId||t.page.geoId,parentUid:t.tracking.uid?t.tracking.uid:void 0,isMemberSignedIn:t.auth.isMember,...e}},K={},$=e=>{var t=`${e.module||""}|${e.action||""}|${e.context||""}|${e.value||""}`;if(!K[t]){K[t]=!0;var r=G(R(e)),n=new URLSearchParams(r);a(n)}},M=e=>{var t=G(R(e)),r=new URLSearchParams(t);a(r)},b=(e,t,n)=>{var i=n;i||(i=r().getState().meta.cookieDomain);var a=(e=>{var t,r,n=G(R(e)),{destinationUrl:i}=e;e.dstServlet?t=e.dstServlet:i&&(t=(e=>{var t=/(https?:\/\/[^/]+)?\/([^#.?-]*)/.exec(e);if(t&&void 0!==t[2])return t[2]?t[2]:"Home"})(i)||void 0,r=L(i)||"");var{gasl:a}=n;a&&"null"===a&&(a="");var o={...n,gads:t||e.dstServlet,gadl:r,gasl:a};return Object.keys(o).filter((e=>void 0===o[e])).forEach((e=>delete o[e])),o})(e),{gass:o,gac:s="null",gaa:c="null",gal:l="null"}=a;if(!o)throw new Error(`Src servlet undefined, gac:${s}, gaa:${c}, gal:${l}`);if(!a.gads)throw new Error(`Dst servlet undefined, gac:${s}, gaa:${c}, gal:${l}`);var d=new Date;d.setTime(d.getTime()+5e3);var p=`${encodeURIComponent(w(a))}; domain=${i}; path=/; expires=${d.toUTCString()}`;document.cookie=`EVT=${p}`},B=(e,t)=>{var i,a=t;a||(a=r().getState().meta.cookieDomain);try{if((i=n.get("MEVT")||"").length>0&&(i+="~"),(i+=w(e)).length>1024)throw new Error("MEVT Cookie is full");var o=new Date;o.setTime(o.getTime()+5e3);var s=`${encodeURIComponent(i)}; domain=${a}; path=/; expires=${o.toUTCString()}`;document.cookie=`MEVT=${s}`}catch(e){return!1}return!0},x=(e,t)=>{var r={...t,once:void 0,children:void 0},{target:n,currentTarget:a}=e;if(n&&a&&n instanceof HTMLElement){var o=n;do{if(o instanceof HTMLElement&&o.dataset.encodedUrl){var s=i(o.dataset.encodedUrl),c=document.createElement("a");c.href=s,o.parentElement instanceof HTMLElement&&(c.style.display="none",o.parentElement.appendChild(c)),o=c}if(o instanceof HTMLAnchorElement){var l=o;if(window&&window.location&&window.location.hostname&&window.location.hostname===l.hostname){var d=l.href,p={...r,destinationUrl:d};return void b(p)}}o=o.parentElement}while(o&&o!==a)}M(r)},U=(e,t,r)=>{var n=new URLSearchParams;n.append("event_name",t),n.append("event_type",e),n.append("attr",JSON.stringify(r)),fetch(`/UserTrackingRecord?${n.toString()}`,{method:"GET",headers:{"content-type":"application/json","x-requested-by":window.JS_SECURITY_TOKEN},credentials:"same-origin"}).then((e=>(e.ok||e.statusText,e))).catch((r=>{console.error(`Error sending tracking event for ${e}-${t}. Err message is: ${r.message}`)}))},V={PAGEVIEW:"PAGEVIEW",START_BOOKING:"START_BOOKING",BOOKING_CONFIRMATION:"BOOKING_CONFIRMATION",PAGEVIEW_FLIGHT:"PAGEVIEW_FLIGHT",START_BOOKING_FLIGHT:"START_BOOKING_FLIGHT",BOOKING_CONFIRMATION_FLIGHT:"BOOKING_CONFIRMATION_FLIGHT",PAGEVIEW_TRAIN:"PAGEVIEW_TRAIN",START_BOOKING_TRAIN:"START_BOOKING_TRAIN",BOOKING_CONFIRMATION_TRAIN:"BOOKING_CONFIRMATION_TRAIN",PAGEVIEW_PACKAGE:"PAGEVIEW_PACKAGE",START_BOOKING_PACKAGE:"START_BOOKING_PACKAGE",BOOKING_CONFIRMATION_PACKAGE:"BOOKING_CONFIRMATION_PACKAGE",DISPLAY_AD_VIEW:"DISPLAY_AD_VIEW",DISPLAY_AD_CLICK:"DISPLAY_AD_CLICK",META_CLICK:"META_CLICK",IB_CLICK:"IB_CLICK",BL_CLICK:"BL_CLICK",IB_CONVERSION:"IB_CONVERSION",APP_INSTALL:"APP_INSTALL",HOTELS_SP_IMPRESSION:"HOTELS_SP_IMPRESSION",HOTELS_SP_CLICK:"HOTELS_SP_CLICK"},y=(e,t)=>{globalThis.require&&globalThis.require(["trjs!taevents"],(()=>{if(e&&t&&window.taq){var n=r().getState(),{tracking:i}=n,a=(e=>{var t=r().getState(),{tracking:n}=t,i={...e};return n.drsInfo&&(i.drs=n.drsInfo),n.uvmScore&&(i.uvm=n.uvmScore),t.route.geo&&(i.geoid=t.route.geo),i})(t);window.taq("init",481409672),i.retargetingUrl&&window.taq("override",`//${i.retargetingUrl}`),n.route.page&&(a.servlet_name=n.route.page),window.taq("track",e,a)}}))},D={__key:47869923082862,id:"2b8995c2c26e722fd22eb1cf8c527a57",loc:{},definitions:[]},F=e=>{var{children:t,...r}=e;return d(f,{value:r,children:t})},H=(e,t=0,r=1)=>{var{current:n}=o.useRef((()=>{$(e)}));return l(n,t,r)};return[()=>{O=M,e("ClickTracker$1",m=class extends o.Component{constructor(...e){super(...e),this.state={clicked:!1},this.click=e=>{this.props.once&&this.state.clicked||(this.props.forceAjax?O(this.props):x(e,this.props),this.setState({clicked:!0}))}}render(){var e=!this.props.once||!this.state.clicked,t=this.props.useSpan?"span":"div";return o.createElement(t,{onClick:e?this.click:void 0},this.props.children)}}),m.defaultProps={once:!0},_=m,e("Track",h=class extends o.Component{constructor(...e){super(...e),this.mountTracked=!1,this.clickTracked=!1}componentDidMount(){var{mount:e}=this.props;!e||e.once&&this.mountTracked||(O(e),e.once&&(this.mountTracked=!0))}render(){var e={className:this.props.className},{click:t,visible:r}=this.props;return!t||t.once&&this.clickTracked||(e.onClick=e=>{x(e,t),this.clickTracked=!0}),r?r.once?d(c,{onVisible:()=>O(r),children:t=>o.createElement(this.props.element,{...e,ref:t},this.props.children)}):d(s,{onChange:e=>{e&&O(r)},children:t=>o.createElement(this.props.element,{...e,ref:t},this.props.children)}):o.createElement(this.props.element,{...e},this.props.children)}}),h.defaultProps={element:"div",className:void 0},C=U,E=y,S=Object.freeze({}),A=o.createContext(S),({Provider:f,Consumer:N}=A),F.defaultProps={impressionId:void 0,isImpressionLogged:!1},v=class extends o.Component{componentDidMount(){var{isParentComplete:e,logImpression:t}=this.props;e&&t()}componentDidUpdate(e){var{attributes:t,isParentComplete:r,logImpression:n}=this.props,{attributes:i,isParentComplete:a}=e;(!g(t,i)||r&&!a)&&n()}render(){return null}},e("Impression$1",T=class extends o.Component{constructor(e){super(e),this.state={id:void 0,isImpressionLogged:!1}}handleMutationCompletion(e){var t=e&&e.logImpressions&&e.logImpressions.length>0&&e.logImpressions[0],r={isImpressionLogged:!0,...t?{id:t}:{}};this.setState(r)}render(){var{source:e,attributes:t,children:r}=this.props,{id:n,isImpressionLogged:i}=this.state;return d(N,{children:a=>{var o=t[e],s=Object.keys(a).length>0,c=a.impressionId||null,l=!s||a.isImpressionLogged,g={[e]:o,parentId:c||null};return p(u,{children:[d(I,{query:D,children:({executeMutation:e})=>d(v,{attributes:g,isParentComplete:l,logImpression:()=>{o&&(this.setState({isImpressionLogged:!1}),e({impressions:[g]}).then((({data:e})=>e&&this.handleMutationCompletion(e))))}})}),d(F,{impressionId:n,isImpressionLogged:i,children:r})]})}})}}),e({ClickTracker:_,Impression:T,Track:h,UseGARecordImpression:H,addMevtCookie:B,default:O,holisticEvents:V,trackClick:x,trackEventAJAXOnPageOnce:$,trackEventCookie:b,trackEventWithContext:C,trackHolisticEvent:E})},[e=>r=e.getStore,e=>n=e.default,e=>i=e.default,e=>a=e.enqueue,e=>o=e,e=>(s=e.default,c=e.HasBeenVisible,l=e.useOnVisible),e=>(d=e.jsx,p=e.jsxs,u=e.Fragment),e=>I=e.Mutation,e=>g=e.default]]},["aunxON","vmXh3M","dROhDJ","fsml46","cDcdfi","BLrxBS","F5FCuN","5X2em-","YwNsO_"]]);
